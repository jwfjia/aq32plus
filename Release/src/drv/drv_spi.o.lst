   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 3
   4              		.fpu fpv4-sp-d16
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.thumb
  15              		.file	"drv_spi.c"
  16              		.text
  17              		.align	2
  18              		.global	spiInit
  19              		.thumb
  20              		.thumb_func
  22              	spiInit:
  23              		@ args = 0, pretend = 0, frame = 40
  24              		@ frame_needed = 0, uses_anonymous_args = 0
  25 0000 00B5     		push	{lr}
  26 0002 8BB0     		sub	sp, sp, #44
  27 0004 0190     		str	r0, [sp, #4]
  28 0006 019A     		ldr	r2, [sp, #4]
  29 0008 4FF44053 		mov	r3, #12288
  30 000c C4F20103 		movt	r3, 16385
  31 0010 9A42     		cmp	r2, r3
  32 0012 40D1     		bne	.L2
  33 0014 4FF00100 		mov	r0, #1
  34 0018 4FF00101 		mov	r1, #1
  35 001c FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
  36 0020 4FF48050 		mov	r0, #4096
  37 0024 4FF00101 		mov	r1, #1
  38 0028 FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
  39 002c 08AB     		add	r3, sp, #32
  40 002e 1846     		mov	r0, r3
  41 0030 FFF7FEFF 		bl	GPIO_StructInit
  42 0034 4FF0E003 		mov	r3, #224
  43 0038 0893     		str	r3, [sp, #32]
  44 003a 4FF00203 		mov	r3, #2
  45 003e 8DF82430 		strb	r3, [sp, #36]
  46 0042 4FF00203 		mov	r3, #2
  47 0046 8DF82530 		strb	r3, [sp, #37]
  48 004a 4FF00000 		mov	r0, #0
  49 004e C4F20200 		movt	r0, 16386
  50 0052 08AB     		add	r3, sp, #32
  51 0054 1946     		mov	r1, r3
  52 0056 FFF7FEFF 		bl	GPIO_Init
  53 005a 4FF00000 		mov	r0, #0
  54 005e C4F20200 		movt	r0, 16386
  55 0062 4FF00501 		mov	r1, #5
  56 0066 4FF00502 		mov	r2, #5
  57 006a FFF7FEFF 		bl	GPIO_PinAFConfig
  58 006e 4FF00000 		mov	r0, #0
  59 0072 C4F20200 		movt	r0, 16386
  60 0076 4FF00601 		mov	r1, #6
  61 007a 4FF00502 		mov	r2, #5
  62 007e FFF7FEFF 		bl	GPIO_PinAFConfig
  63 0082 4FF00000 		mov	r0, #0
  64 0086 C4F20200 		movt	r0, 16386
  65 008a 4FF00701 		mov	r1, #7
  66 008e 4FF00502 		mov	r2, #5
  67 0092 FFF7FEFF 		bl	GPIO_PinAFConfig
  68              	.L2:
  69 0096 019A     		ldr	r2, [sp, #4]
  70 0098 4FF46053 		mov	r3, #14336
  71 009c C4F20003 		movt	r3, 16384
  72 00a0 9A42     		cmp	r2, r3
  73 00a2 40D1     		bne	.L3
  74 00a4 4FF00200 		mov	r0, #2
  75 00a8 4FF00101 		mov	r1, #1
  76 00ac FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
  77 00b0 4FF48040 		mov	r0, #16384
  78 00b4 4FF00101 		mov	r1, #1
  79 00b8 FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
  80 00bc 08AB     		add	r3, sp, #32
  81 00be 1846     		mov	r0, r3
  82 00c0 FFF7FEFF 		bl	GPIO_StructInit
  83 00c4 4FF46043 		mov	r3, #57344
  84 00c8 0893     		str	r3, [sp, #32]
  85 00ca 4FF00203 		mov	r3, #2
  86 00ce 8DF82430 		strb	r3, [sp, #36]
  87 00d2 4FF00203 		mov	r3, #2
  88 00d6 8DF82530 		strb	r3, [sp, #37]
  89 00da 4FF48060 		mov	r0, #1024
  90 00de C4F20200 		movt	r0, 16386
  91 00e2 08AB     		add	r3, sp, #32
  92 00e4 1946     		mov	r1, r3
  93 00e6 FFF7FEFF 		bl	GPIO_Init
  94 00ea 4FF48060 		mov	r0, #1024
  95 00ee C4F20200 		movt	r0, 16386
  96 00f2 4FF00D01 		mov	r1, #13
  97 00f6 4FF00502 		mov	r2, #5
  98 00fa FFF7FEFF 		bl	GPIO_PinAFConfig
  99 00fe 4FF48060 		mov	r0, #1024
 100 0102 C4F20200 		movt	r0, 16386
 101 0106 4FF00E01 		mov	r1, #14
 102 010a 4FF00502 		mov	r2, #5
 103 010e FFF7FEFF 		bl	GPIO_PinAFConfig
 104 0112 4FF48060 		mov	r0, #1024
 105 0116 C4F20200 		movt	r0, 16386
 106 011a 4FF00F01 		mov	r1, #15
 107 011e 4FF00502 		mov	r2, #5
 108 0122 FFF7FEFF 		bl	GPIO_PinAFConfig
 109              	.L3:
 110 0126 019A     		ldr	r2, [sp, #4]
 111 0128 4FF47053 		mov	r3, #15360
 112 012c C4F20003 		movt	r3, 16384
 113 0130 9A42     		cmp	r2, r3
 114 0132 40F09480 		bne	.L1
 115 0136 4FF00200 		mov	r0, #2
 116 013a 4FF00101 		mov	r1, #1
 117 013e FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
 118 0142 4FF00400 		mov	r0, #4
 119 0146 4FF00101 		mov	r1, #1
 120 014a FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
 121 014e 4FF40040 		mov	r0, #32768
 122 0152 4FF00101 		mov	r1, #1
 123 0156 FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 124 015a 08AB     		add	r3, sp, #32
 125 015c 1846     		mov	r0, r3
 126 015e FFF7FEFF 		bl	GPIO_StructInit
 127 0162 4FF4E053 		mov	r3, #7168
 128 0166 0893     		str	r3, [sp, #32]
 129 0168 4FF00203 		mov	r3, #2
 130 016c 8DF82430 		strb	r3, [sp, #36]
 131 0170 4FF00203 		mov	r3, #2
 132 0174 8DF82530 		strb	r3, [sp, #37]
 133 0178 4FF40060 		mov	r0, #2048
 134 017c C4F20200 		movt	r0, 16386
 135 0180 08AB     		add	r3, sp, #32
 136 0182 1946     		mov	r1, r3
 137 0184 FFF7FEFF 		bl	GPIO_Init
 138 0188 4FF40060 		mov	r0, #2048
 139 018c C4F20200 		movt	r0, 16386
 140 0190 4FF00A01 		mov	r1, #10
 141 0194 4FF00602 		mov	r2, #6
 142 0198 FFF7FEFF 		bl	GPIO_PinAFConfig
 143 019c 4FF40060 		mov	r0, #2048
 144 01a0 C4F20200 		movt	r0, 16386
 145 01a4 4FF00B01 		mov	r1, #11
 146 01a8 4FF00602 		mov	r2, #6
 147 01ac FFF7FEFF 		bl	GPIO_PinAFConfig
 148 01b0 4FF40060 		mov	r0, #2048
 149 01b4 C4F20200 		movt	r0, 16386
 150 01b8 4FF00C01 		mov	r1, #12
 151 01bc 4FF00602 		mov	r2, #6
 152 01c0 FFF7FEFF 		bl	GPIO_PinAFConfig
 153 01c4 08AB     		add	r3, sp, #32
 154 01c6 1846     		mov	r0, r3
 155 01c8 FFF7FEFF 		bl	GPIO_StructInit
 156 01cc 4FF48073 		mov	r3, #256
 157 01d0 0893     		str	r3, [sp, #32]
 158 01d2 4FF00103 		mov	r3, #1
 159 01d6 8DF82430 		strb	r3, [sp, #36]
 160 01da 4FF00203 		mov	r3, #2
 161 01de 8DF82530 		strb	r3, [sp, #37]
 162 01e2 4FF48060 		mov	r0, #1024
 163 01e6 C4F20200 		movt	r0, 16386
 164 01ea 08AB     		add	r3, sp, #32
 165 01ec 1946     		mov	r1, r3
 166 01ee FFF7FEFF 		bl	GPIO_Init
 167 01f2 4FF48060 		mov	r0, #1024
 168 01f6 C4F20200 		movt	r0, 16386
 169 01fa 4FF48071 		mov	r1, #256
 170 01fe FFF7FEFF 		bl	GPIO_SetBits
 171 0202 03AB     		add	r3, sp, #12
 172 0204 1846     		mov	r0, r3
 173 0206 FFF7FEFF 		bl	SPI_StructInit
 174 020a 4FF47050 		mov	r0, #15360
 175 020e C4F20000 		movt	r0, 16384
 176 0212 FFF7FEFF 		bl	SPI_I2S_DeInit
 177 0216 4FF48273 		mov	r3, #260
 178 021a ADF80E30 		strh	r3, [sp, #14]	@ movhi
 179 021e 4FF00203 		mov	r3, #2
 180 0222 ADF81230 		strh	r3, [sp, #18]	@ movhi
 181 0226 4FF00103 		mov	r3, #1
 182 022a ADF81430 		strh	r3, [sp, #20]	@ movhi
 183 022e 4FF40073 		mov	r3, #512
 184 0232 ADF81630 		strh	r3, [sp, #22]	@ movhi
 185 0236 4FF02803 		mov	r3, #40
 186 023a ADF81830 		strh	r3, [sp, #24]	@ movhi
 187 023e 4FF47050 		mov	r0, #15360
 188 0242 C4F20000 		movt	r0, 16384
 189 0246 03AB     		add	r3, sp, #12
 190 0248 1946     		mov	r1, r3
 191 024a FFF7FEFF 		bl	SPI_Init
 192 024e 4FF47050 		mov	r0, #15360
 193 0252 C4F20000 		movt	r0, 16384
 194 0256 4FF00101 		mov	r1, #1
 195 025a FFF7FEFF 		bl	SPI_Cmd
 196              	.L1:
 197 025e 0BB0     		add	sp, sp, #44
 198 0260 00BD     		pop	{pc}
 200 0262 00BF     		.align	2
 201              		.global	spiTransfer
 202              		.thumb
 203              		.thumb_func
 205              	spiTransfer:
 206              		@ args = 0, pretend = 0, frame = 16
 207              		@ frame_needed = 0, uses_anonymous_args = 0
 208 0264 00B5     		push	{lr}
 209 0266 85B0     		sub	sp, sp, #20
 210 0268 0190     		str	r0, [sp, #4]
 211 026a 0B46     		mov	r3, r1
 212 026c 8DF80330 		strb	r3, [sp, #3]
 213 0270 4FF48053 		mov	r3, #4096
 214 0274 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 215 0278 11E0     		b	.L6
 216              	.L8:
 217 027a BDF80E30 		ldrh	r3, [sp, #14]
 218 027e 002B     		cmp	r3, #0
 219 0280 14BF     		ite	ne
 220 0282 0023     		movne	r3, #0
 221 0284 0123     		moveq	r3, #1
 222 0286 DBB2     		uxtb	r3, r3
 223 0288 BDF80E20 		ldrh	r2, [sp, #14]	@ movhi
 224 028c 02F1FF32 		add	r2, r2, #-1
 225 0290 ADF80E20 		strh	r2, [sp, #14]	@ movhi
 226 0294 002B     		cmp	r3, #0
 227 0296 02D0     		beq	.L6
 228 0298 4FF00003 		mov	r3, #0
 229 029c 32E0     		b	.L7
 230              	.L6:
 231 029e 0198     		ldr	r0, [sp, #4]
 232 02a0 4FF00201 		mov	r1, #2
 233 02a4 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 234 02a8 0346     		mov	r3, r0
 235 02aa 002B     		cmp	r3, #0
 236 02ac E5D0     		beq	.L8
 237 02ae 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 238 02b2 9BB2     		uxth	r3, r3
 239 02b4 0198     		ldr	r0, [sp, #4]
 240 02b6 1946     		mov	r1, r3
 241 02b8 FFF7FEFF 		bl	SPI_I2S_SendData
 242 02bc 4FF48053 		mov	r3, #4096
 243 02c0 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 244 02c4 11E0     		b	.L9
 245              	.L10:
 246 02c6 BDF80E30 		ldrh	r3, [sp, #14]
 247 02ca 002B     		cmp	r3, #0
 248 02cc 14BF     		ite	ne
 249 02ce 0023     		movne	r3, #0
 250 02d0 0123     		moveq	r3, #1
 251 02d2 DBB2     		uxtb	r3, r3
 252 02d4 BDF80E20 		ldrh	r2, [sp, #14]	@ movhi
 253 02d8 02F1FF32 		add	r2, r2, #-1
 254 02dc ADF80E20 		strh	r2, [sp, #14]	@ movhi
 255 02e0 002B     		cmp	r3, #0
 256 02e2 02D0     		beq	.L9
 257 02e4 4FF00003 		mov	r3, #0
 258 02e8 0CE0     		b	.L7
 259              	.L9:
 260 02ea 0198     		ldr	r0, [sp, #4]
 261 02ec 4FF00101 		mov	r1, #1
 262 02f0 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 263 02f4 0346     		mov	r3, r0
 264 02f6 002B     		cmp	r3, #0
 265 02f8 E5D0     		beq	.L10
 266 02fa 0198     		ldr	r0, [sp, #4]
 267 02fc FFF7FEFF 		bl	SPI_I2S_ReceiveData
 268 0300 0346     		mov	r3, r0
 269 0302 DBB2     		uxtb	r3, r3
 270              	.L7:
 271 0304 1846     		mov	r0, r3
 272 0306 05B0     		add	sp, sp, #20
 273 0308 00BD     		pop	{pc}
 275 030a 00BF     		.align	2
 276              		.global	setSPIdivisor
 277              		.thumb
 278              		.thumb_func
 280              	setSPIdivisor:
 281              		@ args = 0, pretend = 0, frame = 16
 282              		@ frame_needed = 0, uses_anonymous_args = 0
 283 030c 00B5     		push	{lr}
 284 030e 85B0     		sub	sp, sp, #20
 285 0310 0190     		str	r0, [sp, #4]
 286 0312 0B46     		mov	r3, r1
 287 0314 ADF80230 		strh	r3, [sp, #2]	@ movhi
 288 0318 0198     		ldr	r0, [sp, #4]
 289 031a 4FF00001 		mov	r1, #0
 290 031e FFF7FEFF 		bl	SPI_Cmd
 291 0322 019B     		ldr	r3, [sp, #4]
 292 0324 1B88     		ldrh	r3, [r3, #0]	@ movhi
 293 0326 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 294 032a BDF80230 		ldrh	r3, [sp, #2]
 295 032e 102B     		cmp	r3, #16
 296 0330 36D0     		beq	.L16
 297 0332 102B     		cmp	r3, #16
 298 0334 06DC     		bgt	.L21
 299 0336 042B     		cmp	r3, #4
 300 0338 18D0     		beq	.L14
 301 033a 082B     		cmp	r3, #8
 302 033c 23D0     		beq	.L15
 303 033e 022B     		cmp	r3, #2
 304 0340 0DD0     		beq	.L13
 305 0342 6EE0     		b	.L12
 306              	.L21:
 307 0344 402B     		cmp	r3, #64
 308 0346 45D0     		beq	.L18
 309 0348 402B     		cmp	r3, #64
 310 034a 02DC     		bgt	.L22
 311 034c 202B     		cmp	r3, #32
 312 034e 34D0     		beq	.L17
 313 0350 67E0     		b	.L12
 314              	.L22:
 315 0352 802B     		cmp	r3, #128
 316 0354 4BD0     		beq	.L19
 317 0356 B3F5807F 		cmp	r3, #256
 318 035a 55D0     		beq	.L20
 319 035c 61E0     		b	.L12
 320              	.L13:
 321 035e BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 322 0362 23F03803 		bic	r3, r3, #56
 323 0366 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 324 036a 5AE0     		b	.L12
 325              	.L14:
 326 036c BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 327 0370 23F03803 		bic	r3, r3, #56
 328 0374 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 329 0378 BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 330 037c 43F00803 		orr	r3, r3, #8
 331 0380 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 332 0384 4DE0     		b	.L12
 333              	.L15:
 334 0386 BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 335 038a 23F03803 		bic	r3, r3, #56
 336 038e ADF80E30 		strh	r3, [sp, #14]	@ movhi
 337 0392 BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 338 0396 43F01003 		orr	r3, r3, #16
 339 039a ADF80E30 		strh	r3, [sp, #14]	@ movhi
 340 039e 40E0     		b	.L12
 341              	.L16:
 342 03a0 BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 343 03a4 23F03803 		bic	r3, r3, #56
 344 03a8 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 345 03ac BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 346 03b0 43F01803 		orr	r3, r3, #24
 347 03b4 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 348 03b8 33E0     		b	.L12
 349              	.L17:
 350 03ba BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 351 03be 23F03803 		bic	r3, r3, #56
 352 03c2 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 353 03c6 BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 354 03ca 43F02003 		orr	r3, r3, #32
 355 03ce ADF80E30 		strh	r3, [sp, #14]	@ movhi
 356 03d2 26E0     		b	.L12
 357              	.L18:
 358 03d4 BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 359 03d8 23F03803 		bic	r3, r3, #56
 360 03dc ADF80E30 		strh	r3, [sp, #14]	@ movhi
 361 03e0 BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 362 03e4 43F02803 		orr	r3, r3, #40
 363 03e8 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 364 03ec 19E0     		b	.L12
 365              	.L19:
 366 03ee BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 367 03f2 23F03803 		bic	r3, r3, #56
 368 03f6 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 369 03fa BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 370 03fe 43F03003 		orr	r3, r3, #48
 371 0402 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 372 0406 0CE0     		b	.L12
 373              	.L20:
 374 0408 BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 375 040c 23F03803 		bic	r3, r3, #56
 376 0410 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 377 0414 BDF80E30 		ldrh	r3, [sp, #14]	@ movhi
 378 0418 43F03803 		orr	r3, r3, #56
 379 041c ADF80E30 		strh	r3, [sp, #14]	@ movhi
 380 0420 00BF     		nop
 381              	.L12:
 382 0422 019B     		ldr	r3, [sp, #4]
 383 0424 BDF80E20 		ldrh	r2, [sp, #14]	@ movhi
 384 0428 1A80     		strh	r2, [r3, #0]	@ movhi
 385 042a 0198     		ldr	r0, [sp, #4]
 386 042c 4FF00101 		mov	r1, #1
 387 0430 FFF7FEFF 		bl	SPI_Cmd
 388 0434 05B0     		add	sp, sp, #20
 389 0436 00BD     		pop	{pc}
 391              		.ident	"GCC: (Sourcery CodeBench Lite 2012.03-56) 4.6.3"
DEFINED SYMBOLS
                            *ABS*:00000000 drv_spi.c
C:\Users\JOHNIH~1\AppData\Local\Temp\ccqdxj3s.s:17     .text:00000000 $t
C:\Users\JOHNIH~1\AppData\Local\Temp\ccqdxj3s.s:22     .text:00000000 spiInit
C:\Users\JOHNIH~1\AppData\Local\Temp\ccqdxj3s.s:205    .text:00000264 spiTransfer
C:\Users\JOHNIH~1\AppData\Local\Temp\ccqdxj3s.s:280    .text:0000030c setSPIdivisor

UNDEFINED SYMBOLS
RCC_AHB1PeriphClockCmd
RCC_APB1PeriphClockCmd
GPIO_StructInit
GPIO_Init
GPIO_PinAFConfig
GPIO_SetBits
SPI_StructInit
SPI_I2S_DeInit
SPI_Init
SPI_Cmd
SPI_I2S_GetFlagStatus
SPI_I2S_SendData
SPI_I2S_ReceiveData
